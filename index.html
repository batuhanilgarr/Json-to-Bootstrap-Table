<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <title>Bayi Tablosu</title>
</head>
<body>

<div class="container mt-5">
  <h2>Bayi Tablosu</h2>

  <!-- Arama Girişi -->
  <input type="text" id="searchInput" class="form-control mb-3" placeholder="Ara">

  <!-- Tablo -->
  <table class="table table-bordered" id="bayiTable">
    <thead>
      <!-- Sıra numarası ve sütun başlıkları buraya dinamik olarak eklenecek -->
    </thead>
    <tbody id="tableBody">
      <!-- Tablo verileri buraya dinamik olarak eklenecek -->
    </tbody>
  </table>
</div>

<script>
$(document).ready(function() {
  // JSON dosyasının yolu
  var jsonFilePath = 'bayi.json';

  // Tabloyu oluştur
  function createTable(data) {
    var tableHead = $("#bayiTable thead");
    var tableBody = $("#tableBody");

    // Sıra numarası ve sütun başlıklarını belirle
    var headers = Object.keys(data[0]);
    headers.unshift("Sıra No"); // Sıra numarası başlığını ekle
    var headerRow = "<tr>";
    $.each(headers, function(index, header) {
      headerRow += "<th>" + header + "</th>";
    });
    headerRow += "</tr>";
    tableHead.append(headerRow);

    // Verileri tabloya ekle
    $.each(data, function(index, item) {
      var row = "<tr><td>" + (index + 1) + "</td>";
      $.each(headers.slice(1), function(index, header) {
        row += "<td>" + item[header] + "</td>";
      });
      row += "<td><button class='btn btn-warning' onclick='changeRowColor(" + index + ")'>Değiştir</button></td></tr>";
      tableBody.append(row);
    });
  }

  // JSON verilerini çek
  $.getJSON(jsonFilePath, function(data) {
    // Tabloyu oluştur
    createTable(data);
  });

  // Arama işlemini gerçekleştir
  $("#searchInput").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#tableBody tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
    });
  });

  // Satır rengini değiştirme fonksiyonu
  window.changeRowColor = function(index) {
    $("#tableBody tr").eq(index).css("background-color", "yellow");
  };
});
</script>

</body>
</html>
